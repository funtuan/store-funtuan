---
import Layout from '../../layouts/Layout.astro';
import { products, categories } from '../../data/products';
---

<Layout title="ç”Ÿæ´»å°ç‰© | FunTuan å·¥ä½œå®¤">
  <!-- Header -->
  <header class="shop-header">
    <div class="container">
      <a href="/" class="back-link">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        è¿”å›é¦–é 
      </a>
      <div class="header-content">
        <h1>ç”Ÿæ´»å°ç‰©</h1>
        <p>ç²¾é¸ç”Ÿæ´»å¥½ç‰©ï¼Œç‚ºæ—¥å¸¸å¢æ·»ä¸€é»æ¨‚è¶£</p>
      </div>
    </div>
  </header>

  <!-- Category Filter -->
  <section class="filter-section">
    <div class="container">
      <div class="filter-tabs">
        <button class="filter-tab active" data-category="all">å…¨éƒ¨å•†å“</button>
        {categories.map(category => (
          <button class="filter-tab" data-category={category}>{category}</button>
        ))}
      </div>
      <div class="product-count">
        å…± <span id="count">{products.length}</span> ä»¶å•†å“
      </div>
    </div>
  </section>

  <!-- Products Grid -->
  <section class="products-section">
    <div class="container">
      <div class="products-grid">
        {products.map(product => (
          <a href={`/shop/${product.id}`} class="product-card" data-category={product.category}>
            <div class="product-badge">{product.category}</div>
            <div class="product-image">
              <img src={product.image} alt={product.name} />
            </div>
            <div class="product-info">
              <h3>{product.name}</h3>
              <p>{product.description}</p>
              <div class="product-footer">
                <span class="product-price">NT$ {product.price}</span>
                <span class="view-detail">æŸ¥çœ‹è©³æƒ… â†’</span>
              </div>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- Shop Features -->
  <section class="features-section">
    <div class="container">
      <div class="features-grid">
        <div class="feature-item">
          <div class="feature-icon">ğŸ“¦</div>
          <h4>ç²¾å¿ƒåŒ…è£</h4>
          <p>æ¯ä»¶å•†å“éƒ½ç¶“éç”¨å¿ƒåŒ…è£ï¼Œè®“ä½ æ”¶åˆ°æ»¿æ»¿çš„é©šå–œ</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">ğŸŒ±</div>
          <h4>ç’°ä¿ç†å¿µ</h4>
          <p>æˆ‘å€‘å„ªå…ˆé¸ç”¨ç’°ä¿æè³ªï¼Œæ¸›å°‘å°ç’°å¢ƒçš„è² æ“”</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">ğŸ’</div>
          <h4>åŸå‰µè¨­è¨ˆ</h4>
          <p>æ¯æ¬¾å•†å“éƒ½æ˜¯ FunTuan åŸå‰µè¨­è¨ˆï¼Œç¨ä¸€ç„¡äºŒ</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">âœ‰ï¸</div>
          <h4>å®¢æœæ”¯æ´</h4>
          <p>æœ‰ä»»ä½•å•é¡Œæ­¡è¿ä¾†ä¿¡ï¼Œæˆ‘å€‘å°‡ç›¡å¿«å›è¦†æ‚¨</p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta-section">
    <div class="container">
      <div class="cta-content">
        <h2>é‡‘æµè¨­ç½®ä¸­ï¼Œæ•¬è«‹æœŸå¾…ï¼</h2>
        <p>æˆ‘å€‘æ­£åœ¨åŠªåŠ›å»ºç½®ç·šä¸Šè³¼ç‰©åŠŸèƒ½</p>
        <p>å¦‚æœ‰è³¼è²·éœ€æ±‚ï¼Œæ­¡è¿é€é Email èˆ‡æˆ‘å€‘è¯ç¹«</p>
        <a href="mailto:hank85627@gmail.com" class="btn btn-primary">
          hank85627@gmail.com
        </a>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <h3>FunTuan å·¥ä½œå®¤</h3>
          <p>å°‡ä¸€äº›æ—¥å¸¸å°äº‹è®Šå¾—æ–¹ä¾¿æœ‰è¶£</p>
        </div>
        <div class="footer-contact">
          <h4>è¯ç¹«æˆ‘å€‘</h4>
          <p><a href="mailto:hank85627@gmail.com">hank85627@gmail.com</a></p>
          <p class="reply-time">æˆ‘å€‘å°‡åœ¨ 1-2 å€‹å·¥ä½œå¤©å…§å›è¦†æ‚¨</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>Â© 2025 FunTuan å·¥ä½œå®¤. All rights reserved.</p>
      </div>
    </div>
  </footer>
</Layout>

<style>
  /* Header */
  .shop-header {
    background: linear-gradient(135deg, var(--color-primary) 0%, #e8c4a0 100%);
    padding: 2rem 0 4rem;
    color: var(--color-white);
  }

  .back-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--color-white);
    text-decoration: none;
    opacity: 0.9;
    margin-bottom: 2rem;
    transition: var(--transition);
  }

  .back-link:hover {
    opacity: 1;
  }

  .header-content {
    text-align: center;
  }

  .header-content h1 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
  }

  .header-content p {
    color: rgba(255, 255, 255, 0.9);
    font-size: 1.1rem;
  }

  /* Filter */
  .filter-section {
    background: var(--color-white);
    padding: 1.5rem 0;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  }

  .filter-section .container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 1rem;
  }

  .filter-tabs {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .filter-tab {
    padding: 0.5rem 1rem;
    border: 2px solid var(--color-primary);
    background: transparent;
    border-radius: 25px;
    cursor: pointer;
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--color-primary);
    transition: var(--transition);
  }

  .filter-tab:hover,
  .filter-tab.active {
    background: var(--color-primary);
    color: var(--color-white);
  }

  .product-count {
    color: var(--color-text-light);
    font-size: 0.9rem;
  }

  /* Products */
  .products-section {
    padding: 3rem 0;
    background: var(--color-bg);
  }

  .products-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  @media (min-width: 640px) {
    .products-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .products-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .product-card {
    background: var(--color-white);
    border-radius: var(--radius);
    overflow: hidden;
    text-decoration: none;
    color: inherit;
    box-shadow: var(--shadow);
    transition: var(--transition);
    display: flex;
    flex-direction: column;
    position: relative;
  }

  .product-card:hover {
    transform: translateY(-6px);
    box-shadow: var(--shadow-hover);
  }

  .product-card.hidden {
    display: none;
  }

  .product-badge {
    position: absolute;
    top: 1rem;
    left: 1rem;
    background: var(--color-secondary);
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--color-text);
  }

  .product-image {
    text-align: center;
    padding: 0;
    background: linear-gradient(180deg, #f8f8f6 0%, #ffffff 100%);
    height: 280px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  .product-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: var(--transition);
  }

  .product-card:hover .product-image img {
    transform: scale(1.05);
  }

  .product-info {
    padding: 1.5rem;
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .product-info h3 {
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
    color: var(--color-text);
  }

  .product-info p {
    font-size: 0.9rem;
    color: var(--color-text-light);
    flex: 1;
    line-height: 1.5;
  }

  .product-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid #eee;
  }

  .product-price {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--color-primary);
  }

  .view-detail {
    font-size: 0.85rem;
    color: var(--color-text-light);
    transition: var(--transition);
  }

  .product-card:hover .view-detail {
    color: var(--color-primary);
  }

  /* Features */
  .features-section {
    background: var(--color-white);
    padding: 4rem 0;
  }

  .features-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 2rem;
  }

  @media (min-width: 768px) {
    .features-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  .feature-item {
    text-align: center;
  }

  .feature-icon {
    font-size: 2.5rem;
    margin-bottom: 1rem;
  }

  .feature-item h4 {
    font-size: 1rem;
    margin-bottom: 0.5rem;
    color: var(--color-text);
  }

  .feature-item p {
    font-size: 0.85rem;
    color: var(--color-text-light);
    line-height: 1.5;
  }

  /* CTA */
  .cta-section {
    background: linear-gradient(135deg, var(--color-secondary) 0%, #c5dfef 100%);
    padding: 4rem 0;
  }

  .cta-content {
    text-align: center;
    max-width: 500px;
    margin: 0 auto;
  }

  .cta-content h2 {
    color: var(--color-text);
    margin-bottom: 1rem;
  }

  .cta-content p {
    color: var(--color-text);
    margin-bottom: 0.5rem;
  }

  .cta-content .btn {
    margin-top: 1.5rem;
  }

  /* Footer */
  .footer {
    background: var(--color-text);
    color: var(--color-white);
    padding: 60px 0 30px;
  }

  .footer-content {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    margin-bottom: 2rem;
  }

  @media (min-width: 768px) {
    .footer-content {
      grid-template-columns: 1fr 1fr;
    }
  }

  .footer-brand h3 {
    color: var(--color-primary);
    margin-bottom: 0.5rem;
  }

  .footer-brand p {
    color: rgba(255, 255, 255, 0.7);
  }

  .footer-contact h4 {
    color: var(--color-white);
    margin-bottom: 0.5rem;
  }

  .footer-contact a {
    color: var(--color-secondary);
    text-decoration: none;
  }

  .footer-contact a:hover {
    text-decoration: underline;
  }

  .reply-time {
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.5);
    margin-top: 0.25rem;
  }

  .footer-bottom {
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    padding-top: 1.5rem;
    text-align: center;
  }

  .footer-bottom p {
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.5);
  }
</style>

<script>
  const filterTabs = document.querySelectorAll('.filter-tab');
  const productCards = document.querySelectorAll('.product-card');
  const countEl = document.getElementById('count');

  filterTabs.forEach(tab => {
    tab.addEventListener('click', () => {
      const category = tab.dataset.category;
      
      // Update active tab
      filterTabs.forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
      
      // Filter products
      let visibleCount = 0;
      productCards.forEach(card => {
        if (category === 'all' || card.dataset.category === category) {
          card.classList.remove('hidden');
          visibleCount++;
        } else {
          card.classList.add('hidden');
        }
      });
      
      // Update count
      if (countEl) countEl.textContent = visibleCount.toString();
    });
  });
</script>
